<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pix Updates | v0.1.1 Dimensional Fix</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        :root {
            --primary: #FFB4AB; 
            --surface: #050505; 
            --card-bg: rgba(20, 20, 20, 0.8);
            --radius-xl: 32px; 
            --blur: 40px;
        }
        
        /* Force dark background immediately to prevent white flash */
        html, body { background: #000; margin: 0; padding: 0; color: #fff; font-family: 'Google Sans Flex', sans-serif; height: 100vh; overflow: hidden; }

        #loader {
            position: fixed; inset: 0; background: #000; z-index: 99999;
            display: flex; align-items: center; justify-content: center;
            transition: opacity 0.8s ease-out;
        }
        .pulse-logo { width: 80px; height: 80px; background: var(--primary); border-radius: 24px; animation: m3-pulse 2s infinite cubic-bezier(0.34, 1.56, 0.64, 1); }
        .loading-text { position: fixed; bottom: 40px; right: 40px; font-weight: 900; font-size: 2rem; color: var(--primary); animation: m3-float 1.5s infinite; }
        @keyframes m3-pulse { 0%, 100% { transform: scale(0.8); border-radius: 40px; } 50% { transform: scale(1.1); border-radius: 18px; } }
        @keyframes m3-float { 0%, 100% { opacity: 0.3; transform: translateY(0); } 50% { opacity: 1; transform: translateY(-10px); } }

        /* UI ELEMENTS */
        nav { padding: 40px; display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 10; }
        .widget { padding: 12px 24px; background: rgba(255,255,255,0.1); backdrop-filter: blur(var(--blur)); border-radius: 100px; display: flex; align-items: center; gap: 12px; font-weight: 700; border: 1px solid rgba(255,255,255,0.1); color: #fff; cursor: pointer; }

        .main-layout { display: grid; grid-template-columns: 1fr 400px; gap: 40px; max-width: 1400px; margin: 0 auto; padding: 0 40px; }
        .hero-title { font-size: 6.5rem; font-weight: 900; letter-spacing: -5px; line-height: 0.85; margin-top: 60px; pointer-events: none; }
        
        .unified-panel { background: var(--card-bg); border-radius: var(--radius-xl); padding: 32px; backdrop-filter: blur(var(--blur)); border: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; gap: 20px; height: 580px; margin-top: 20px; box-shadow: 0 25px 50px rgba(0,0,0,0.5); }
        
        .history-item { padding: 16px; border-radius: 20px; display: block; width: 100%; text-align: left; border: none; background: transparent; color: #fff; margin-bottom: 8px; cursor: pointer; transition: 0.2s; }
        .history-item.active { background: rgba(255,255,255,0.1); border-left: 4px solid var(--primary); font-weight: 800; }

        /* MODALS */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 20000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(20px); }
        .modal-card { background: #0a0a0a; padding: 40px; border-radius: var(--radius-xl); width: 600px; border: 1px solid #222; position: relative; }
        
        /* 3D VIEWPORT */
        #skin-viewport { width: 100%; height: 350px; background: #000; border-radius: 24px; margin: 20px 0; border: 1px solid #333; cursor: grab; }
        
        .compare-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .compare-box { background: #151515; border-radius: 15px; height: 180px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid #222; }
        .skin-img { max-width: 70%; max-height: 110px; object-fit: contain; image-rendering: pixelated; }

        .btn-m3 { background: #fff; color: #000; padding: 16px; border-radius: 20px; font-weight: 900; border: none; cursor: pointer; width: 100%; transition: 0.2s; }
        .btn-m3:hover { transform: scale(1.02); }

        #cursor-dot, #cursor-outline { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 100001; border-radius: 50%; }
        #cursor-dot { width: 6px; height: 6px; background: #fff; transform: translate(-50%, -50%); }
        #cursor-outline { width: 30px; height: 30px; border: 1.5px solid white; mix-blend-mode: difference; transition: transform 0.1s; }
    </style>
</head>
<body>

    <div id="loader"><div class="pulse-logo"></div><div class="loading-text">Loading</div></div>
    <div id="cursor-dot"></div><div id="cursor-outline"></div>

    <nav>
        <button class="widget" onclick="openModal('settings-modal')">
            <span class="material-symbols-rounded">schedule</span> <span id="clock">00:00</span>
            <span class="material-symbols-rounded">settings</span>
        </button>
        <button class="widget">
            <span id="temp">43Â°F</span> <span class="material-symbols-rounded">cloud</span>
        </button>
    </nav>

    <div class="main-layout">
        <div><h1 class="hero-title">PIX<br><span style="color: var(--primary);">BETA</span></h1></div>
        <div class="unified-panel">
            <div id="focus-area">
                <span style="background:var(--primary); color:#000; padding:4px 10px; border-radius:8px; font-size:0.7rem; font-weight:900;">V1.0</span>
                <h2 id="skin-name-display" style="margin:15px 0; font-size:2rem; font-weight:900;">The Ember Knight</h2>
                <button class="btn-m3" onclick="openPreview()">PREVIEW SKIN</button>
            </div>
            <hr style="border:none; border-top:1px solid rgba(255,255,255,0.1);">
            <div id="skin-list" style="overflow-y: auto;"></div>
        </div>
    </div>

    <div id="whats-new-modal" class="modal-overlay">
        <div class="modal-card">
            <h1 style="font-weight:900; letter-spacing:-2px; font-size:2.5rem;">WHAT'S NEW? ðŸš€</h1>
            <p style="margin:20px 0; line-height:1.6; opacity:0.7;">
                â€¢ <b>3D Character:</b> Full multi-part "Steve" model.<br>
                â€¢ <b>Texture Support:</b> Your PNG file is now mapped to the 3D model.<br>
                â€¢ <b>Hotfix:</b> Fixed the white background error.
            </p>
            <button class="btn-m3" onclick="closeModals()">LET'S GO!</button>
        </div>
    </div>

    <div id="preview-modal" class="modal-overlay">
        <div class="modal-card">
            <h2 id="modal-title" style="font-weight:900;">SKIN PREVIEW</h2>
            <div id="skin-viewport"></div>
            <div class="compare-row">
                <div class="compare-box"><span style="font-size:0.6rem; opacity:0.3;">PREVIOUS</span></div>
                <div class="compare-box" style="border-color: var(--primary);">
                    <span style="font-size:0.6rem; opacity:0.3;">UPDATED (1.0.0)</span>
                    <img src="temp's Skin with no cap Version 1.0.0.png" class="skin-img" alt="Skin Texture">
                </div>
            </div>
            <button class="btn-m3" style="margin-top:20px;" onclick="closeModals()">CLOSE</button>
        </div>
    </div>

    <script>
        const SKINS = [{name: "The Ember Knight", ver: "V1.0"}, {name: "Neon Samurai", ver: "V1.2"}];
        let scene, camera, renderer, steve;

        function init3D() {
            const container = document.getElementById('skin-viewport');
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.innerHTML = '';
            container.appendChild(renderer.domElement);

            // TEXTURE LOADING
            const loader = new THREE.TextureLoader();
            // This links your specific filename to the 3D model
            const skinTex = loader.load("temp's Skin with no cap Version 1.0.0.png");
            skinTex.magFilter = THREE.NearestFilter; // Sharpens the Minecraft pixels
            const skinMat = new THREE.MeshPhongMaterial({ map: skinTex, transparent: true });

            // CONSTRUCT STEVE (Minecraft Body Parts)
            steve = new THREE.Group();
            const head = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), skinMat);
            head.position.y = 1.6;
            
            const body = new THREE.Mesh(new THREE.BoxGeometry(1, 1.5, 0.5), skinMat);
            body.position.y = 0.35;

            const armL = new THREE.Mesh(new THREE.BoxGeometry(0.5, 1.5, 0.5), skinMat);
            armL.position.set(-0.75, 0.35, 0);

            const armR = new THREE.Mesh(new THREE.BoxGeometry(0.5, 1.5, 0.5), skinMat);
            armR.position.set(0.75, 0.35, 0);

            const legL = new THREE.Mesh(new THREE.BoxGeometry(0.5, 1.5, 0.5), skinMat);
            legL.position.set(-0.25, -1.15, 0);

            const legR = new THREE.Mesh(new THREE.BoxGeometry(0.5, 1.5, 0.5), skinMat);
            legR.position.set(0.25, -1.15, 0);

            steve.add(head, body, armL, armR, legL, legR);
            scene.add(steve);

            const light = new THREE.DirectionalLight(0xffffff, 1.2);
            light.position.set(5, 5, 5);
            scene.add(light, new THREE.AmbientLight(0x404040, 1.5));
            camera.position.z = 7;

            // Rotation Drag
            let isMoving = false, lastX = 0;
            container.onmousedown = (e) => { isMoving = true; lastX = e.clientX; };
            window.onmouseup = () => isMoving = false;
            window.onmousemove = (e) => { if(isMoving) { steve.rotation.y += (e.clientX - lastX) * 0.01; lastX = e.clientX; } };

            animate3D();
        }

        function animate3D() {
            requestAnimationFrame(animate3D);
            steve.rotation.y += Math.sin(Date.now() * 0.001) * 0.001; // Idle look around
            steve.position.y = Math.sin(Date.now() * 0.002) * 0.05; // Idle float
            renderer.render(scene, camera);
        }

        function openPreview() { openModal('preview-modal'); setTimeout(init3D, 100); }
        function openModal(id) { closeModals(); document.getElementById(id).style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }

        // Cursor Logic
        const dot = document.getElementById('cursor-dot'), out = document.getElementById('cursor-outline');
        let mX = 0, mY = 0, oX = 0, oY = 0;
        window.addEventListener('mousemove', (e) => { mX = e.clientX; mY = e.clientY; });
        function moveCursor() {
            dot.style.transform = `translate3d(${mX}px, ${mY}px, 0)`;
            oX += (mX - oX) * 0.15; oY += (mY - oY) * 0.15;
            out.style.transform = `translate3d(${oX - 15}px, ${oY - 15}px, 0)`;
            requestAnimationFrame(moveCursor);
        }

        window.onload = () => {
            moveCursor();
            if(localStorage.getItem('p_v') !== "0.1.1") { setTimeout(() => openModal('whats-new-modal'), 1500); localStorage.setItem('p_v', "0.1.1"); }
            setTimeout(() => document.getElementById('loader').style.opacity = '0', 2000);
            setTimeout(() => document.getElementById('loader').style.display = 'none', 2800);
            document.getElementById('clock').innerText = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
            
            document.getElementById('skin-list').innerHTML = SKINS.map(s => `
                <button class="history-item" onclick="document.getElementById('skin-name-display').innerText='${s.name}'">
                    ${s.name} <br> <span style="font-size:0.7rem; opacity:0.4">${s.ver}</span>
                </button>
            `).join('');
        };
    </script>
</body>
</html>
