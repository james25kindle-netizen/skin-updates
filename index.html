<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        /* Previous Root & Base Styles */
        :root {
            --primary: #BC161F; --surface: #FFF8F7; --surface-variant: #F5DDDA;
            --on-surface: #201A19; --card-bg: rgba(255, 255, 255, 0.7);
            --radius-xl: 32px; --radius-pill: 100px;
        }
        body.dark-theme {
            --primary: #FFB4AB; --surface: #1A1110; --surface-variant: #332120;
            --on-surface: #F1DFDD; --card-bg: rgba(43, 33, 32, 0.7);
        }

        /* BLUR EFFECT FOR MAIN CONTENT */
        main.admin-open, nav.admin-open {
            filter: blur(15px);
            opacity: 0.3;
            pointer-events: none;
        }

        /* SUCCESS BOUNCE ANIMATION */
        @keyframes successBounce {
            0% { transform: scale(1); }
            30% { transform: scale(0.9); background: #4CAF50; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .success-animate {
            animation: successBounce 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* ... (Keep your previous Cursor, Card, and FAB CSS) ... */

        #cursor-dot { width: 6px; height: 6px; background: var(--primary); position: fixed; pointer-events: none; z-index: 10001; border-radius: 50%; }
        #cursor-outline { width: 30px; height: 30px; border: 1.5px solid #fff; position: fixed; pointer-events: none; z-index: 10000; border-radius: 50%; mix-blend-mode: difference; transition: width 0.3s, height 0.3s, border-radius 0.3s; }
        .cursor-morph { background: white !important; border: none !important; }

        /* MODAL STYLES */
        #admin-modal-overlay { 
            position: fixed; top:0; left:0; width:100%; height:100%; 
            background: rgba(0,0,0,0.2); z-index: 10002; 
            display: none; align-items: center; justify-content: center; 
            backdrop-filter: blur(10px);
        }
        #admin-modal-overlay.open { display: flex; }
        #admin-modal { background: var(--surface); padding: 40px; border-radius: var(--radius-xl); display: flex; flex-direction: column; gap: 12px; width: 450px; box-shadow: 0 40px 80px rgba(0,0,0,0.5); }
        
        input, textarea { background: var(--surface-variant); border: none; padding: 16px; border-radius: 16px; font-family: inherit; font-weight: 600; color: var(--on-surface); }
        .save-btn { background: var(--on-surface); color: var(--surface); padding: 16px; border-radius: 16px; border: none; font-weight: 800; cursor: none; }
    </style>
</head>
<body>

    <div id="cursor-dot"></div>
    <div id="cursor-outline"></div>
    <div class="video-bg-container"><video id="bg-video" autoplay muted loop playsinline></video></div>

    <nav id="main-nav">
        </nav>

    <main id="main-content" class="container">
        </main>

    <div class="fab-container">
        <button id="admin-trigger" class="fab admin interactive" onclick="toggleModal()">
            <span class="material-symbols-rounded">settings</span>
            <span>MANAGE</span>
        </button>
        </div>

    <div id="admin-modal-overlay">
        <div id="admin-modal">
            <h2 style="margin:0">Admin Panel</h2>
            <input type="text" id="new-name" placeholder="Skin Name">
            <input type="text" id="new-ver" placeholder="Version">
            <input type="text" id="new-video" placeholder="Video.mp4">
            <input type="text" id="new-file" placeholder="Skin.png">
            <textarea id="new-desc" placeholder="Description"></textarea>
            
            <button id="save-btn" class="save-btn interactive" onclick="addNewSkin()">SAVE ENTRY</button>
            <div id="admin-skin-manager"></div>
            <button class="interactive" onclick="toggleModal()" style="background:none; border:none; color:var(--primary); font-weight:800;">CLOSE</button>
        </div>
    </div>

    <script>
        // --- DATA & CORE LOGIC ---
        let skinData = JSON.parse(localStorage.getItem('pix_skins')) || [{ id: 0, name: "The Ember Knight", version: "v3.0", desc: "Lava flows and visor highlights.", video: "ember_knight.mp4", file: "ember.png" }];
        
        function toggleModal() {
            const overlay = document.getElementById('admin-modal-overlay');
            const main = document.getElementById('main-content');
            const nav = document.getElementById('main-nav');
            
            overlay.classList.toggle('open');
            main.classList.toggle('admin-open');
            nav.classList.toggle('admin-open');
            
            if(overlay.classList.contains('open')) renderAdminManager();
        }

        function addNewSkin() {
            const btn = document.getElementById('save-btn');
            
            // Trigger Bounce Animation
            btn.classList.add('success-animate');
            setTimeout(() => btn.classList.remove('success-animate'), 600);

            const newSkin = {
                id: Date.now(),
                name: document.getElementById('new-name').value || "New Skin",
                version: document.getElementById('new-ver').value || "v1.0",
                desc: document.getElementById('new-desc').value || "Description.",
                video: document.getElementById('new-video').value || "",
                file: document.getElementById('new-file').value || ""
            };

            skinData.unshift(newSkin);
            localStorage.setItem('pix_skins', JSON.stringify(skinData));
            
            // Briefly wait for animation before closing
            setTimeout(() => {
                location.reload(); // Refresh to apply changes cleanly
            }, 500);
        }

        // --- ENHANCED SNAP MOUSE LOGIC ---
        const dot = document.querySelector('#cursor-dot');
        const outline = document.querySelector('#cursor-outline');
        let mX = 0, mY = 0, oX = 0, oY = 0, hover = false, target = null;

        window.onmousemove = (e) => {
            mX = e.clientX;
            mY = e.clientY;

            // Global hit detection (works through modals/overlays)
            const hoveredEl = document.elementFromPoint(mX, mY);
            const hit = hoveredEl ? hoveredEl.closest('.interactive, button, input, textarea') : null;

            if (hit) {
                hover = true;
                target = hit;
                outline.classList.add('cursor-morph');
                dot.style.opacity = 0;
            } else {
                hover = false;
                target = null;
                outline.classList.remove('cursor-morph');
                dot.style.opacity = 1;
            }
        };

        function animate() {
            dot.style.transform = `translate3d(${mX-3}px, ${mY-3}px, 0)`;
            if (hover && target) {
                const r = target.getBoundingClientRect();
                const cX = r.left + r.width/2;
                const cY = r.top + r.height/2;
                oX += (cX - oX) * 0.25;
                oY += (cY - oY) * 0.25;
                outline.style.width = (r.width + 12) + "px";
                outline.style.height = (r.height + 12) + "px";
                outline.style.borderRadius = getComputedStyle(target).borderRadius;
            } else {
                oX += (mX - oX) * 0.15;
                oY += (mY - oY) * 0.15;
                outline.style.width = "30px";
                outline.style.height = "30px";
                outline.style.borderRadius = "50%";
            }
            outline.style.transform = `translate3d(${oX - parseFloat(outline.style.width)/2}px, ${oY - parseFloat(outline.style.height)/2}px, 0)`;
            requestAnimationFrame(animate);
        }
        
        // Start Loop
        animate();

        // (Keep previous Key Detection for A+S+D)
        const keys = {};
        window.onkeydown = (e) => {
            keys[e.key.toLowerCase()] = true;
            if (keys['a'] && keys['s'] && keys['d']) {
                document.getElementById('admin-trigger').style.display = 'flex';
            }
        };
        window.onkeyup = (e) => keys[e.key.toLowerCase()] = false;
    </script>
</body>
</html>
