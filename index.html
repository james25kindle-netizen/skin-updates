<!DOCTYPE html>
<html lang="en">
<head>
    </head>
<body>

    <div id="cursor-dot"></div>
    <div id="cursor-outline"></div>

    <div class="video-bg-container">
        <div id="mask-layer" class="radial-mask">
            <video id="bg-video" autoplay muted loop playsinline src=""></video>
        </div>
    </div>

    <nav>
        <button class="widget interactive" onclick="openModal('settings-modal')">
            <div class="mag">
                <span class="material-symbols-rounded">schedule</span>
                <span id="clock">00:00</span>
                <span class="material-symbols-rounded" style="opacity: 0.5;">settings</span>
            </div>
        </button>

        <a href="https://www.google.com/search?q=weather" target="_blank" class="widget interactive" style="text-decoration: none; color: inherit;">
            <div class="mag">
                <span id="temp">43Â°F</span>
                <span class="material-symbols-rounded">cloud</span>
            </div>
        </a>
    </nav>

    <div id="settings-modal" class="modal-overlay">
        <div class="modal-card">
            <h2 style="color:white; margin-bottom:10px;">UI Settings</h2>
            <div class="setting-control" style="display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid #222;">
                <span>Glass Blur</span>
                <input type="range" id="blur-range" min="0" max="80" value="40" oninput="updateBlur(this.value)">
            </div>
            <button onclick="closeModals()" style="background:#fff; color:#000; padding:15px; border:none; border-radius:12px; font-weight:900; margin-top:10px;">DONE</button>
        </div>
    </div>

    <div id="admin-modal" class="modal-overlay">
        <div class="modal-card">
            <h2 style="color:white;">Admin Access</h2>
            <input type="text" id="new-name" placeholder="Skin Name" style="background:#1a1a1a; border:1px solid #333; color:white; padding:10px; border-radius:8px; margin-bottom:5px;">
            <input type="text" id="new-ver" placeholder="Version" style="background:#1a1a1a; border:1px solid #333; color:white; padding:10px; border-radius:8px; margin-bottom:5px;">
            <input type="text" id="new-video" placeholder="Video Link" style="background:#1a1a1a; border:1px solid #333; color:white; padding:10px; border-radius:8px; margin-bottom:5px;">
            <input type="text" id="new-dl" placeholder="Download Link" style="background:#1a1a1a; border:1px solid #333; color:white; padding:10px; border-radius:8px; margin-bottom:5px;">
            <button onclick="addNewSkin()" style="background:var(--primary); padding:12px; border:none; border-radius:12px; font-weight:900;">ADD SKIN</button>
            
            <p style="font-size: 0.7rem; opacity: 0.5; margin-top: 15px;">MANAGE CUSTOM SKINS</p>
            <div class="admin-list" id="admin-delete-list" style="margin-top:5px; overflow-y:auto; max-height:150px; background:#000; padding:10px; border-radius:8px;"></div>
            
            <button onclick="closeModals()" style="background:none; color:white; opacity:0.5; border:none; margin-top:10px;">CLOSE</button>
        </div>
    </div>

    <script>
        // --- YOUR GITHUB MASTER LIST ---
        const GITHUB_MASTER_LIST = [
            { 
                name: "The Ember Knight", 
                version: "V3.0", 
                desc: "Custom lava flows and visor highlights.", 
                video: "skin-preview.mp4", 
                dl: "ember.zip" 
            },
            { 
                name: "Neon Samurai", 
                version: "V1.2", 
                desc: "Blue neon trails and tech armor.", 
                video: "neon-preview.mp4", 
                dl: "neon.zip" 
            }
        ];

        const DB_SKINS = 'pix_skins_gh_v1';
        let customSkins = JSON.parse(localStorage.getItem(DB_SKINS)) || [];
        let skins = [...customSkins, ...GITHUB_MASTER_LIST];
        let currentIdx = 0;

        // --- FIXED MODAL LOGIC ---
        function openModal(id) { 
            closeModals(); // Close any open ones first
            const modal = document.getElementById(id);
            if (modal) {
                modal.style.display = 'flex'; 
                document.body.classList.add('modal-open');
                if(id === 'admin-modal') renderAdminList();
            }
        }

        function closeModals() { 
            document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); 
            document.body.classList.remove('modal-open'); 
        }

        // --- ADMIN DELETE LOGIC (Only deletes custom skins) ---
        function deleteSkin(indexInCustom) {
            customSkins.splice(indexInCustom, 1);
            localStorage.setItem(DB_SKINS, JSON.stringify(customSkins));
            skins = [...customSkins, ...GITHUB_MASTER_LIST];
            currentIdx = 0;
            updateUI();
            renderAdminList();
        }

        function renderAdminList() {
            const list = document.getElementById('admin-delete-list');
            // Only show custom skins in the delete list to keep GitHub skins safe
            list.innerHTML = customSkins.length > 0 
                ? customSkins.map((s, i) => `
                    <div style="display:flex; justify-content:space-between; align-items:center; padding:5px; border-bottom:1px solid #222; font-size:0.8rem;">
                        <span>${s.name}</span>
                        <button onclick="deleteSkin(${i})" style="color:red; background:none; border:none; cursor:pointer;">Delete</button>
                    </div>`).join('')
                : '<p style="font-size:0.7rem; opacity:0.5; text-align:center;">No custom skins added yet.</p>';
        }

        // --- SHORTCUT LOGIC ---
        window.addEventListener('keydown', (e) => { 
            if (e.shiftKey && e.key.toLowerCase() === 'a') openModal('admin-modal');
        });

        // --- REST OF UI LOGIC ---
        function updateUI() {
            const s = skins[currentIdx] || skins[0];
            document.getElementById('skin-title').textContent = s.name;
            document.getElementById('skin-badge').textContent = s.version;
            document.getElementById('bg-video').src = s.video;
            
            const list = document.getElementById('history-list');
            list.innerHTML = '';
            skins.forEach((skin, i) => {
                const btn = document.createElement('button');
                btn.className = `history-item interactive ${i === currentIdx ? 'active' : ''}`;
                btn.innerHTML = `<div><span style="opacity:0.5; font-size:0.7rem;">${skin.version}</span><br>${skin.name}</div>`;
                btn.onclick = () => { currentIdx = i; updateUI(); };
                list.appendChild(btn);
            });
        }

        function addNewSkin() {
            const n = document.getElementById('new-name').value, v = document.getElementById('new-ver').value;
            if(n && v) {
                customSkins.unshift({ name: n, version: v, video: document.getElementById('new-video').value, dl: document.getElementById('new-dl').value });
                localStorage.setItem(DB_SKINS, JSON.stringify(customSkins));
                skins = [...customSkins, ...GITHUB_MASTER_LIST];
                updateUI(); renderAdminList();
            }
        }

        // Initial Start
        updateUI();
        // ... (Keep your cursor and clock logic at the bottom) ...
    </script>
</body>
</html>
