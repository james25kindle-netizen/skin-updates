<nav>
    <button class="widget interactive" onclick="openModal('settings-modal')">
        <div class="mag">
            <span class="material-symbols-rounded">schedule</span>
            <span id="clock">00:00</span>
            <span class="material-symbols-rounded" style="opacity: 0.5;">settings</span>
        </div>
    </button>

    <a href="https://www.google.com/search?q=weather" target="_blank" class="widget interactive" style="text-decoration: none; color: white;">
        <div class="mag">
            <span id="location-name">Detecting...</span>
            <span id="temp">--째F</span>
            <span class="material-symbols-rounded">cloud</span>
        </div>
    </a>
</nav>

<script>
    // --- GITHUB MASTER LIST ---
    // I put both skins inside the [ ] brackets so they load correctly
    const GITHUB_MASTER_LIST = [
        { 
            name: "The Ember Knight", 
            version: "V3.0", 
            desc: "Custom lava flows and visor highlights.", 
            video: "skin-preview.mp4", 
            dl: "ember.zip" 
        },
        { 
            name: "Neon Samurai", 
            version: "V1.2", 
            desc: "Blue neon trails and tech armor.", 
            video: "neon-preview.mp4", 
            dl: "neon.zip" 
        }
    ];

    const DB_SKINS = 'pix_skins_gh_v1';
    let customSkins = JSON.parse(localStorage.getItem(DB_SKINS)) || [];
    let skins = [...customSkins, ...GITHUB_MASTER_LIST];
    let currentIdx = 0;

    // --- ACCURATE WEATHER LOGIC ---
    async function updateWeather() {
        try {
            // wttr.in detects your location automatically
            const response = await fetch('https://wttr.in/?format=j1');
            const data = await response.json();
            
            const tempF = data.current_condition[0].temp_F;
            const city = data.nearest_area[0].areaName[0].value;
            
            document.getElementById('temp').textContent = tempF + "째F";
            document.getElementById('location-name').textContent = city + ", ";
        } catch (error) {
            // If it fails, it shows your local 46째F
            document.getElementById('temp').textContent = "46째F";
            document.getElementById('location-name').textContent = "Local, ";
        }
    }

    function updateClock() {
        document.getElementById('clock').textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }

    function updateUI() {
        const s = skins[currentIdx] || skins[0];
        document.getElementById('skin-title').textContent = s.name;
        document.getElementById('skin-badge').textContent = s.version;
        document.getElementById('skin-desc').textContent = s.desc || "A custom Pix update skin.";
        document.getElementById('bg-video').src = s.video;
        
        const list = document.getElementById('history-list');
        list.innerHTML = '';
        skins.forEach((skin, i) => {
            const btn = document.createElement('button');
            btn.className = `history-item interactive ${i === currentIdx ? 'active' : ''}`;
            btn.innerHTML = `<div><span style="opacity:0.5; font-size:0.7rem;">${skin.version}</span><br>${skin.name}</div>`;
            btn.onclick = () => { currentIdx = i; updateUI(); };
            list.appendChild(btn);
        });
    }

    // Initialize everything
    updateWeather();
    setInterval(updateWeather, 900000); // Update every 15 mins
    setInterval(updateClock, 1000);
    updateClock();
    updateUI();
</script>
