<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        /* Small style update to make weather look like a button */
        .weather-btn { text-decoration: none; color: inherit; transition: opacity 0.2s; }
        .weather-btn:hover { opacity: 0.8; }
    </style>
</head>
<body>

    <nav>
        <button class="widget interactive" onclick="openModal('settings-modal')">
            <div class="mag">
                <span class="material-symbols-rounded">schedule</span>
                <span id="clock">00:00</span>
                <span class="material-symbols-rounded" style="opacity: 0.5;">settings</span>
            </div>
        </button>

        <a href="https://www.google.com/search?q=weather" target="_blank" class="widget interactive weather-btn">
            <div class="mag">
                <span id="temp">--°F</span>
                <span class="material-symbols-rounded">cloud</span>
            </div>
        </a>
    </nav>

    <script>
        // --- GITHUB MASTER LIST (FIXED BRACKETS) ---
        const GITHUB_MASTER_LIST = [
            { 
                name: "The Ember Knight", 
                version: "V3.0", 
                desc: "Custom lava flows and visor highlights.", 
                video: "skin-preview.mp4", 
                dl: "ember.zip" 
            },
            { 
                name: "Neon Samurai", 
                version: "V1.2", 
                desc: "Blue neon trails and tech armor.", 
                video: "neon-preview.mp4", 
                dl: "neon.zip" 
            }
        ];

        const DB_SKINS = 'pix_skins_gh_v1';
        let customSkins = JSON.parse(localStorage.getItem(DB_SKINS)) || [];
        let skins = [...customSkins, ...GITHUB_MASTER_LIST];
        let currentIdx = 0;

        // --- REAL WEATHER LOGIC ---
        async function updateWeather() {
            try {
                // wttr.in detects your IP location automatically
                const response = await fetch('https://wttr.in/?format=j1');
                const data = await response.json();
                const tempF = data.current_condition[0].temp_F;
                document.getElementById('temp').textContent = tempF + "°F";
            } catch (error) {
                console.log("Weather error, using fallback");
                // Fallback to your local temp if the fetch fails
                document.getElementById('temp').textContent = "43°F"; 
            }
        }
        
        // Initial call and refresh every 15 mins
        updateWeather();
        setInterval(updateWeather, 900000);

        // --- CLOCK LOGIC ---
        function updateClock() {
            document.getElementById('clock').textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- THE REST OF YOUR FUNCTIONS (updateUI, downloadSkin, addNewSkin, deleteSkin, etc.) ---
        // (Make sure to include the updateUI() and cursor animation functions here from our previous versions)

        function updateUI() {
            const s = skins[currentIdx] || skins[0];
            document.getElementById('skin-title').textContent = s.name;
            document.getElementById('skin-badge').textContent = s.version;
            document.getElementById('skin-desc').textContent = s.desc || "A custom Pix update skin.";
            document.getElementById('bg-video').src = s.video;
            
            const list = document.getElementById('history-list');
            list.innerHTML = '';
            skins.forEach((skin, i) => {
                const btn = document.createElement('button');
                btn.className = `history-item interactive ${i === currentIdx ? 'active' : ''}`;
                btn.innerHTML = `<div><span style="opacity:0.5; font-size:0.7rem;">${skin.version}</span><br>${skin.name}</div>`;
                btn.onclick = () => { currentIdx = i; updateUI(); };
                list.appendChild(btn);
            });
        }

        // Initialize UI
        updateUI();
    </script>
</body>
</html>
