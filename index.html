// 2. DYNAMIC WEATHER ASSETS
navigator.geolocation?.getCurrentPosition(async (pos) => {
    try {
        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&current_weather=true&temperature_unit=fahrenheit`);
        const data = await res.json();
        const code = data.current_weather.weathercode; // WMO Weather Interpretation Code
        const temp = Math.round(data.current_weather.temperature);
        
        document.getElementById('temp').textContent = temp + "Â°F";
        const img = document.getElementById('weather-asset');
        
        // MAPPING YOUR SPECIFIC FILES
        let iconFile = '';

        if (code === 0) {
            iconFile = 'image_8e31d0.png'; // Clear Sky (Sun)
        } else if (code >= 1 && code <= 3) {
            iconFile = 'image_8e3262.png'; // Partly Cloudy to Overcast (Cloud)
        } else if (code >= 45 && code <= 48) {
            iconFile = 'image_8e9440.png'; // Foggy
        } else if (code >= 51 && code <= 67) {
            iconFile = 'image_057984.png'; // Drizzle and Rain
        } else {
            iconFile = 'image_8e3262.png'; // Default fallback
        }

        img.src = iconFile;
        img.style.display = 'block';
        
        // Error check: If image fails to load, show a default icon
        img.onerror = () => {
            img.style.display = 'none';
            document.getElementById('weather-icon-fallback').style.display = 'inline-block';
        };

    } catch (e) { 
        console.error("Weather asset failed to load"); 
    }
});
